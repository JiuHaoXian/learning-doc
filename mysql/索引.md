![image](assets/20160926141127260.jpeg)



#### 索引失效

1.有or必全有索引;
2.复合索引未用左列字段;
3.like以%开头;
4.需要类型转换;
5.where中索引列有运算;
6.where中索引列使用了函数;

7.如果mysql觉得全表扫描更快时（数据少）;



#### 什么时候没有必要使用索引？

1.唯一性差;
2.频繁更新的字段不用（更新索引消耗）;
3.where中不用的字段;
4.索引使用<>时，效果一般;



#### Explain的Type

  system：**表只有一行记录，相当于系统表**

  const：**通过索引一次就找到，只匹配一行数据**

  eq_ref: **唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配**

  ref：**非唯一性索引扫描，返回匹配某个单独值的所有行**：用于=、<、> 操作符带索引的列

  range：**只检索给定范围的行，使用一个索引来选择行** ：一般使用 between、<、>

  index：**只遍历索引树**

  ALL：**全表扫描，性能最差**  





##### mysql的连接数？

mysql的最大连接数默认是100, 最大可以达到16384

1. set GLOBAL max_connections=1000。设置全局最大连接数（重启会恢复默认）
2. 通过修改mysql安装目录下my.ini配置文件的max_connections

### **MySQL事务隔离级别**

| 事务隔离级别                 | 脏读 | 不可重复读 | 幻读 |
| ---------------------------- | ---- | ---------- | ---- |
| 读未提交（read-uncommitted） | 是   | 是         | 是   |
| 不可重复读（read-committed） | 否   | 是         | 是   |
| 可重复读（repeatable-read）  | 否   | 否         | 是   |
| 串行化（serializable）       |      |            |      |

#### 事务的四大特性

原子性 一致性 隔离性 持久性



#### 回表？

回表就是先通过数据库索引扫描出数据所在的行，再通过行主键id取出索引中未提供的数据，即基于非主键索引的查询需要多扫描一棵索引树。因此，可以通过索引先查询出id字段，再通过主键id字段，查询行中的字段数据，即通过再次查询提供MySQL查询速度.