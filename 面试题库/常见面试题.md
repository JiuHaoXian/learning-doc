# java



1. jenkis docker

2. 1. Jenkis需要配合哪些组组件完成持续集成？

​	   git docker maven

​     \2. docker常用命令

​		docker image ；docker run。docker ps？？？



1. 什么是**MongoDB ?**

​	MongoDB 是由C++语言编写的，是一个基于分布式文件存储的开源数据库系统。

在高负载的情况下，添加更多的节点，可以保证服务器性能。

MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。

MongoDB 将数据存储为一个文档，数据结构由键值(key=>value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组





1. **Redis**、**Memcache**和**MongoDB**的区别

​	从以下几个维度，对redis、memcache、mongoDB 做了对比，

1. 1. 性能

​		都比较高，性能对我们来说应该都不是瓶颈

​		总体来讲，TPS方面redis和memcache差不多，要大于mongodb

​	**2.**  操作的便利性

​		memcache数据结构单一

​		redis丰富一些，数据操作方面，redis更好一些，较少的网络IO次数

​		mongodb支持丰富的数据表达，索引，最类似关系型数据库，支持的查询语言非常丰富

​	**3**、内存空间的大小和数据量的大小

​		redis在2.0版本后增加了自己的VM特性，突破物理内存的限制；可以对key value设置过期时间（类似memcache）

​		memcache可以修改最大可用内存,采用LRU算法

​		mongoDB适合大数据量的存储，依赖操作系统VM做内存管理，吃内存也比较厉害，服务不要和别的服务在一起

​	**4**、可用性（单点问题）

​		对于单点问题，

​		redis，依赖客户端来实现分布式读写；主从复制时，每次从节点重新连接主节点都要依赖整个快照,无增量复制，因性能和效率问题，

​		所以单点问题比较复杂；不支持自动sharding,需要依赖程序设定一致hash 机制。

​		一种替代方案是，不用redis本身的复制机制，采用自己做主动复制（多份存储），或者改成增量复制的方式（需要自己实现），一致性问		题和性能的权衡

Memcache本身没有数据冗余机制，也没必要；对于故障预防，采用依赖成熟的hash或者环状的算法，解决单点故障引起的抖动问题。

mongoDB支持master-slave,replicaset（内部采用paxos选举算法，自动故障恢复）,auto sharding机制，对客户端屏蔽了故障转移和切分机制。

​	**5**、可靠性（持久化）

​		对于数据持久化和数据恢复，

​		redis支持（快照、AOF）：依赖快照进行持久化，aof增强了可靠性的同时，对性能有所影响

​		memcache不支持，通常用在做缓存,提升性能；

​		MongoDB从1.8版本开始采用binlog方式支持持久化的可靠性

​	**6**、数据一致性（事务支持）

​		Memcache 在并发场景下，用cas保证一致性

​		redis事务支持比较弱，只能保证事务中的每个操作连续执行

​		mongoDB不支持事务

​	**7**、数据分析

​		mongoDB内置了数据分析的功能(mapreduce),其他不支持

​	**8**、应用场景

​		redis：数据量较小的更性能操作和运算上

​		memcache：用于在动态系统中减少数据库负载，提升性能;做缓存，提高性能（适合读多写少，对于数据量比较大，可以采用sharding）

​		MongoDB:主要解决海量数据的访问效率问题





  \8. 支付加密方式

​	rsa 数字签名：参数加密，对比签名



  9.ribbon。 https://www.cnblogs.com/raicho/p/11798912.html



10.feign 组件工作原理

​	feign根据服务名去euraka找服务注册表 里实例，找到多个，用ribbon负载均衡算法发起http调用，feign对ribbon的一个封装，feign写接口，用动态代理做代理，对接口里的方法作代理，并生成请求requestanbliter对象，交给httpclient客户端执行



11.熔断器hystrix。限流的几种方式 ，网关

方式：信号量，线程池。



1. 信号量和线程池区别

​	线程池：满了到队列，队列满了 就拒绝限流了

 	信号量：配置一个数字-信号量，请求时，计数器会+1，请求完毕计数器会-1，当并发数达到信号量配置，限流

​	区别是，线程池时异步的，信号量是同步的，线程池会有一个队列缓冲，信号量的话并发高会直接拒绝



12.ribbon的超时时间和hystrix的时间，谁要大一点？

​	hystrix应该大一点



1. springboot是怎么整合springmvc的？底层原理

使用是通过SpringBoot整合各个框架是越来越方便了，整合SpringMVC只需要添加对应的starer依赖即可。



底层原理是通过自动装配，springapplication——》EmbeddedServletContainerAutoConfiguration

https://blog.csdn.net/cml_blog/article/details/70196572







​	

1. 在项目中用到哪些分布式锁？https://www.jianshu.com/p/a1ebab8ce78a

​		分布式锁：为了防止分布式系统中的多个进程之间相互干扰，我们需要一种分布式协调技术来对这些进程进行调度。而这个分布式协调技	术的核心就是来实现这个分布式锁。



- 在分布式系统环境下，一个方法在同一时间只能被一个机器的一个线程执行
- 高可用的获取锁与释放锁
- 高性能的获取锁与释放锁
- 具备可重入特性（可理解为重新进入，由多于一个任务并发使用，而不必担心数据错误）
- 具备锁失效机制，防止死锁
- 具备非阻塞锁特性，即没有获取到锁将直接返回获取锁失败



分布式锁的实现有哪些

- Memcached：利用 Memcached 的 add 命令。此命令是原子性操作，只有在 key 不存在的情况下，才能 add成功，也就意味着线程得到了锁。
- Redis：和 Memcached 的方式类似，利用 Redis 的 setnx 命令。此命令同样是原子性操作，只有在 key 不存在的情况下，才能 set 成功。
- **Zookeeper**：利用 Zookeeper 的顺序临时节点，来实现分布式锁和等待队列。Zookeeper 设计的初衷，就是为了实现分布式锁服务的。
- Chubby：Google 公司实现的粗粒度分布式锁服务，底层利用了 Paxos 一致性算法。
- 基于**Redission**的实现



**Redis**小结

优点: 对于Redis实现简单，性能对比ZK和Mysql较好。如果不需要特别复杂的要求，那么自己就可以利用setNx进行实现，如果自己需要复杂的需求的话那么可以利用或者借鉴Redission。对于一些要求比较严格的场景来说的话可以使用RedLock。

缺点: 需要维护Redis集群，如果要实现RedLock那么需要维护更多的集群。



1. 电商秒杀场景？
2. Juc里面那些用到了锁？



1. 数据库里的innodb锁？

共享锁（**S Lock**）:允许事务读一行数据，具有锁兼容性质，允许多个事务同时获得该锁。

排它锁（**X Lock**）:允许事务删除或更新一行数据，具有排它性，某个事务要想获得锁，必须要等待其他事务释放该对象的锁。

查询加的是共享锁，更新就是排它锁



1. 数据库做分布式锁的实现方式？

基于mysql的排他性



1. 水平分表





29.mysql优化？



1. 怎么查看sql是否命中索引

**explain**



1. 哪些需要创建索引？

根据离散度



1. 视图解析器



1. aop的实现方式？

注解和配置

注解：定义一些拦截器，在拦截器里拦截



1. 过滤器和拦截器的区别？



1. 动态代理？
2. 类加载器？

分为



只要准备spring的面试，循环依赖是必准备的。其实用两级缓存也能做，用三级有个重要原因是遵循spring的生命周期。





1. eureka的工作流程？

默认30秒去拉





38.为什么hashmap要在8度时候树化？

根据泊松分布概率（源码注释里写了）







1. 索引的分类？
2. 索引不适用的条件？
3. springIOC的底层实现？

XML+dom4j+工厂+单例

1. Hashmap线程安全的方式？
2. arraylist和hashset区别？
3. 线程池了解多少？
4. 线程池拒绝策略分别使用在什么场景？
5. springAOP的底层实现？

动态代理，newProxyInstance，cglib，ASM

1. 讲一下代理模式？

动态代理静态代理

1. 你都了解哪些设计模式，在JDK中则呢吗体现的？
2. 千万级数据量的list找一个数据（多线程），抢红包
3. 讲一下JVM堆的内存管理？

栈上分配->TLAB->新生代、老年代=> 性分析=>GC算法->几种垃圾回收器其优缺点

1. 多大的对象会被扔到老年代？
2. G1和Region不是连续的，而且之间还有可达的引用，我现在要回收其中一个，另一个会被怎么处理？
3. 听说过CMS的并发预处理和并发可中断预处理吗？
4. 百万级int数据量的一个array求和（for/join）
5.  下面哪些是对称加密算法（）

A DES  B AES  C DSA  D RSA

答案：AB

解析：常用的对称加密算法有：DES、3DES、RC2、RC4、AES

常用的非对称加密算法有：RSA、DSA、ECC

使用单向散列函数的加密算法：MD5、SHA

1. 